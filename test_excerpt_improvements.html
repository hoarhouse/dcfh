<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Excerpt Improvements Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .version-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .version-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
        }
        .old-version .version-title {
            border-color: #dc3545;
        }
        .new-version .version-title {
            border-color: #28a745;
        }
        
        /* Old excerpt style */
        .old-excerpt {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        /* New improved excerpt style */
        .new-excerpt {
            color: #555;
            margin-bottom: 1rem;
            line-height: 1.7;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .sample-post {
            border: 1px solid #e5e5e5;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 4px;
        }
        
        .post-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        
        .code-display {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
        }
        
        .improvement-list {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .improvement-list h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .improvement-list ul {
            margin: 10px 0;
            padding-left: 25px;
        }
        
        .improvement-list li {
            margin: 8px 0;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Blog Excerpt Formatting Improvements</h1>
    
    <div class="improvement-list">
        <h3>‚úÖ Improvements Made</h3>
        <ul>
            <li><strong>Better Text Extraction:</strong> Now intelligently extracts the first paragraph instead of raw text</li>
            <li><strong>Improved Line Height:</strong> Changed from 1.6 to 1.7 for better readability</li>
            <li><strong>Multi-line Truncation:</strong> Shows up to 3 lines with clean ellipsis</li>
            <li><strong>Better Color Contrast:</strong> Changed from #666 to #555 for improved readability</li>
            <li><strong>Smart Formatting:</strong> Preserves paragraph structure while removing HTML tags</li>
        </ul>
    </div>
    
    <div class="comparison-container">
        <div class="version-section old-version">
            <h2 class="version-title">‚ùå OLD: Plain Text Strip</h2>
            
            <div class="sample-post">
                <div class="post-title">Vatican's AI Blueprint</div>
                <p class="old-excerpt" id="old1"></p>
            </div>
            
            <div class="sample-post">
                <div class="post-title">Digital Ethics Framework</div>
                <p class="old-excerpt" id="old2"></p>
            </div>
            
            <div class="code-display">
                <strong>Old Function:</strong><br>
                truncateText(stripHtml(post.content), 150)
                <br><br>
                Result: All HTML removed, paragraphs run together
            </div>
        </div>
        
        <div class="version-section new-version">
            <h2 class="version-title">‚úÖ NEW: Smart Formatting</h2>
            
            <div class="sample-post">
                <div class="post-title">Vatican's AI Blueprint</div>
                <p class="new-excerpt" id="new1"></p>
            </div>
            
            <div class="sample-post">
                <div class="post-title">Digital Ethics Framework</div>
                <p class="new-excerpt" id="new2"></p>
            </div>
            
            <div class="code-display">
                <strong>New Function:</strong><br>
                createFormattedExcerpt(post.content, 150)
                <br><br>
                Result: First paragraph extracted, clean truncation
            </div>
        </div>
    </div>
    
    <div class="improvement-list" style="background: #fff3cd; border-left: 4px solid #ffc107;">
        <h3>üìù Implementation Details</h3>
        <p>The new <code>createFormattedExcerpt()</code> function:</p>
        <ol>
            <li>Parses the HTML content into a DOM element</li>
            <li>Looks for the first &lt;p&gt; tag to get clean paragraph text</li>
            <li>If no paragraphs found, intelligently handles line breaks</li>
            <li>Applies proper truncation with ellipsis</li>
            <li>CSS handles multi-line display with webkit-line-clamp</li>
        </ol>
    </div>

    <script>
        // Sample content with HTML
        const sampleContent1 = `<p>In an unprecedented move that caught Silicon Valley off guard, the Vatican has emerged as an unlikely leader in artificial intelligence ethics, developing what experts are calling the world's most comprehensive framework for responsible AI deployment.</p><p>The initiative, spearheaded by the Pontifical Academy for Life, brings together an unusual coalition of tech giants, ethicists, and religious leaders to address growing concerns about AI's impact on human dignity and social justice.</p>`;
        
        const sampleContent2 = `<p>As organizations worldwide grapple with digital transformation, a new framework for ethical technology deployment has emerged from collaborative efforts between academic institutions and industry leaders.</p><p>This comprehensive approach addresses key challenges in data privacy, algorithmic transparency, and human-centered design principles that prioritize user wellbeing over engagement metrics.</p>`;
        
        // Old method - strips all HTML
        function stripHtml(html) {
            const tmp = document.createElement('div');
            tmp.innerHTML = html;
            return tmp.textContent || tmp.innerText || '';
        }
        
        function truncateText(text, maxLength) {
            if (text.length <= maxLength) return text;
            return text.substring(0, maxLength).trim() + '...';
        }
        
        // New improved method
        function createFormattedExcerpt(content, maxLength = 150) {
            if (!content) return '';
            
            const tmp = document.createElement('div');
            tmp.innerHTML = content;
            
            const firstPara = tmp.querySelector('p');
            if (firstPara) {
                const text = firstPara.textContent || firstPara.innerText || '';
                return truncateText(text.trim(), maxLength);
            }
            
            let text = content
                .replace(/<br\s*\/?>/gi, ' ')
                .replace(/<\/p>/gi, ' ')
                .replace(/<[^>]+>/g, '')
                .replace(/\s+/g, ' ')
                .trim();
                
            return truncateText(text, maxLength);
        }
        
        // Apply old method
        document.getElementById('old1').textContent = truncateText(stripHtml(sampleContent1), 150);
        document.getElementById('old2').textContent = truncateText(stripHtml(sampleContent2), 150);
        
        // Apply new method
        document.getElementById('new1').textContent = createFormattedExcerpt(sampleContent1, 150);
        document.getElementById('new2').textContent = createFormattedExcerpt(sampleContent2, 150);
    </script>
</body>
</html>