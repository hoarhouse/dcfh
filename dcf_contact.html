<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact DCF Hungary | Domus Communis Foundation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fafafa;
        }

        .header {
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            height: 70px;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: #333;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #000, #333);
            border-radius: 6px;
            margin-right: 0.75rem;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-menu a:hover {
            color: #000;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #000, #333);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .user-avatar:hover {
            transform: scale(1.05);
        }

        .main-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
        }

        .page-subtitle {
            color: #666;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .content-wrapper {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 3rem;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .contact-form {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .form-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .form-description {
            color: #666;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .form-label.required::after {
            content: " *";
            color: #dc3545;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #333;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .form-select:focus {
            outline: none;
            border-color: #333;
        }

        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            font-size: 1rem;
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #333;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-help {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .btn {
            background: #333;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: #000;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #999;
            cursor: not-allowed;
            transform: none;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .sidebar-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1.5rem;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .contact-item:last-child {
            margin-bottom: 0;
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background: #f8f9fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
            border: 2px solid #e5e5e5;
        }

        .contact-details {
            flex: 1;
        }

        .contact-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .contact-value {
            color: #666;
            line-height: 1.5;
        }

        .contact-value a {
            color: #007bff;
            text-decoration: none;
        }

        .contact-value a:hover {
            text-decoration: underline;
        }

        .team-grid {
            display: grid;
            gap: 1.5rem;
        }

        .team-member {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .team-member:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .team-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #000, #333);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .team-info {
            flex: 1;
        }

        .team-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .team-role {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .team-email {
            color: #007bff;
            font-size: 0.8rem;
            text-decoration: none;
        }

        .team-email:hover {
            text-decoration: underline;
        }

        .quick-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quick-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            text-decoration: none;
            color: #666;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .quick-link:hover {
            background: #f8f9fa;
            color: #333;
            transform: translateX(4px);
        }

        .quick-link-icon {
            font-size: 1.1rem;
        }

        .emergency-contact {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
        }

        .emergency-title {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .emergency-description {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .faq-section {
            margin-top: 2rem;
        }

        .faq-item {
            margin-bottom: 1rem;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            overflow: hidden;
        }

        .faq-question {
            background: #f8f9fa;
            padding: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .faq-question:hover {
            background: #e9ecef;
        }

        .faq-answer {
            padding: 1rem;
            display: none;
            line-height: 1.6;
        }

        .faq-answer.active {
            display: block;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-link {
            width: 40px;
            height: 40px;
            background: #f8f9fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: #666;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: #333;
            color: white;
            transform: translateY(-2px);
        }

        /* Success/Error Messages */
        .message {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .content-wrapper {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .sidebar {
                order: -1;
            }

            .team-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 0 1rem;
            }

            .nav-menu {
                display: none;
            }

            .page-title {
                font-size: 2rem;
            }

            .contact-form,
            .sidebar-card,
            .faq-section {
                padding: 1.5rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .contact-item {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .team-member {
                flex-direction: column;
                text-align: center;
            }

            .social-links {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon"></div>
                Domus Communis Foundation Hungary
            </a>
            <ul class="nav-menu">
                <li><a href="dcf_member_home.html">Home</a></li>
                <li><a href="dcf_members_directory.html">Members</a></li>
                <li><a href="dcf_projects_home.html">Projects</a></li>
                <li><a href="dcf_events_calendar.html">Events</a></li>
                <li><a href="dcf_resources_library.html">Resources</a></li>
            </ul>
            <div class="user-menu">
    <div class="user-dropdown">
        <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar">SJ</div>
        <div class="dropdown-menu" id="userDropdown">
            <div class="dropdown-header">
                <div class="dropdown-avatar">SJ</div>
                <div class="dropdown-info">
                    <div class="dropdown-name" id="dropdownUserName">Dr. Sarah Johnson</div>
                    <div class="dropdown-email" id="dropdownUserEmail">sarah.johnson@dcfhungary.org</div>
                </div>
            </div>
            <div class="dropdown-divider"></div>
            <a href="dcf_member_profile.html" class="dropdown-item">
                <span class="dropdown-icon">👤</span>
                View Profile
            </a>
            <a href="dcf_settings.html" class="dropdown-item">
                <span class="dropdown-icon">⚙️</span>
                Settings
            </a>
            <a href="dcf_contact.html" class="dropdown-item">
                <span class="dropdown-icon">💬</span>
                Help & Support
            </a>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item logout-btn" onclick="localStorage.clear(); sessionStorage.clear(); window.location.href='dcf_login_page.html'; return false;">
                <span class="dropdown-icon">🚪</span>
                LOGOUT
            </button>
        </div>
    </div>
</div>
        </nav>
    </header>

    <main class="main-container">
        <div class="page-header">
            <h1 class="page-title">Contact DCF Hungary</h1>
            <p class="page-subtitle">
                Connect with our team to learn more about ethical AI development, join our community, or explore collaboration opportunities in advancing human-centered technology.
            </p>
        </div>

        <div class="content-wrapper">
            <div class="main-content">
                <div class="contact-form">
                    <h2 class="form-title">Get In Touch</h2>
                    <p class="form-description">
                        Whether you're interested in joining our mission, have questions about our projects, or want to explore partnerships, we'd love to hear from you. Our team typically responds within 24 hours.
                    </p>

                    <div id="messageContainer"></div>

                    <form action="https://formspree.io/f/mldleazg" method="POST" id="contactForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label required" for="firstName">First Name</label>
                                <input type="text" id="firstName" name="firstName" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label required" for="lastName">Last Name</label>
                                <input type="text" id="lastName" name="lastName" class="form-input" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label required" for="email">Email Address</label>
                            <input type="email" id="email" name="email" class="form-input" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="organization">Organization</label>
                                <input type="text" id="organization" name="organization" class="form-input" placeholder="University, Company, NGO, etc.">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="role">Your Role</label>
                                <input type="text" id="role" name="role" class="form-input" placeholder="Researcher, Developer, Student, etc.">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label required" for="inquiryType">Type of Inquiry</label>
                            <select id="inquiryType" name="inquiryType" class="form-select" required>
                                <option value="">Select inquiry type</option>
                                <option value="membership">Membership & Community</option>
                                <option value="collaboration">Research Collaboration</option>
                                <option value="partnership">Partnership Opportunities</option>
                                <option value="education">Educational Programs</option>
                                <option value="events">Events & Workshops</option>
                                <option value="media">Media & Press</option>
                                <option value="funding">Funding & Donations</option>
                                <option value="technical">Technical Support</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label required" for="subject">Subject</label>
                            <input type="text" id="subject" name="subject" class="form-input" placeholder="Brief description of your inquiry" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label required" for="message">Message</label>
                            <textarea id="message" name="message" class="form-textarea" placeholder="Please provide details about your inquiry, questions, or how you'd like to get involved with DCF Hungary..." required></textarea>
                            <div class="form-help">Minimum 50 characters. Be specific about your interests or needs.</div>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn">
                                📧 Send Message
                            </button>
                        </div>
                    </form>
                </div>

                <div class="contact-form faq-section">
                    <h2 class="form-title">Frequently Asked Questions</h2>
                    
                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            How can I join DCF Hungary as a member?
                        </div>
                        <div class="faq-answer">
                            You can apply for membership through our registration process. We welcome researchers, students, technologists, and anyone passionate about ethical AI development. Membership includes access to our resource library, events, and collaborative projects.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            What types of collaboration opportunities are available?
                        </div>
                        <div class="faq-answer">
                            We offer research partnerships, educational program development, policy consultation, and community outreach initiatives. We're particularly interested in projects that advance ethical AI, digital sovereignty, and technology education.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            Do you offer educational workshops or training programs?
                        </div>
                        <div class="faq-answer">
                            Yes! We regularly host workshops on AI ethics, digital literacy, and technology policy. Check our events calendar for upcoming sessions, or contact us about organizing a custom training program for your organization.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">
                            How can my organization partner with DCF Hungary?
                        </div>
                        <div class="faq-answer">
                            We welcome partnerships with universities, research institutions, nonprofits, and ethical technology companies. Partnership opportunities include joint research projects, event co-hosting, resource sharing, and advocacy initiatives.
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="sidebar-card">
                    <h3 class="sidebar-title">Contact Information</h3>
                    
                    <div class="contact-item">
                        <div class="contact-icon">📧</div>
                        <div class="contact-details">
                            <div class="contact-label">General Inquiries</div>
                            <div class="contact-value">
                                <a href="mailto:info@dcfhungary.org">info@dcfhungary.org</a>
                            </div>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">🔬</div>
                        <div class="contact-details">
                            <div class="contact-label">Research Partnerships</div>
                            <div class="contact-value">
                                <a href="mailto:research@dcfhungary.org">research@dcfhungary.org</a>
                            </div>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">📰</div>
                        <div class="contact-details">
                            <div class="contact-label">Media & Press</div>
                            <div class="contact-value">
                                <a href="mailto:media@dcfhungary.org">media@dcfhungary.org</a>
                            </div>
                        </div>
                    </div>

                    <div class="contact-item">
                        <div class="contact-icon">📍</div>
                        <div class="contact-details">
                            <div class="contact-label">Location</div>
                            <div class="contact-value">
                                Budapest, Hungary<br>
                                <small>Virtual meetings available worldwide</small>
                            </div>
                        </div>
                    </div>

                    <div class="social-links">
                        <a href="#" class="social-link" title="LinkedIn">💼</a>
                        <a href="#" class="social-link" title="Twitter">🐦</a>
                        <a href="#" class="social-link" title="GitHub">💻</a>
                        <a href="#" class="social-link" title="YouTube">📺</a>
                    </div>
                </div>

                <div class="sidebar-card">
                    <h3 class="sidebar-title">Our Team</h3>
                    <div class="team-grid">
                        <div class="team-member">
                            <div class="team-avatar">SJ</div>
                            <div class="team-info">
                                <div class="team-name">Dr. Sarah Johnson</div>
                                <div class="team-role">Executive Director</div>
                                <a href="mailto:sarah.johnson@dcfhungary.org" class="team-email">sarah.johnson@dcfhungary.org</a>
                            </div>
                        </div>

                        <div class="team-member">
                            <div class="team-avatar">AK</div>
                            <div class="team-info">
                                <div class="team-name">Antal Kuthy</div>
                                <div class="team-role">Co-founder & Technology Director</div>
                                <a href="mailto:antal.kuthy@dcfhungary.org" class="team-email">antal.kuthy@dcfhungary.org</a>
                            </div>
                        </div>

                        <div class="team-member">
                            <div class="team-avatar">ZV</div>
                            <div class="team-info">
                                <div class="team-name">Zsadány Véscey</div>
                                <div class="team-role">Co-founder & Strategic Operations</div>
                                <a href="mailto:zsadany.vescey@dcfhungary.org" class="team-email">zsadany.vescey@dcfhungary.org</a>
                            </div>
                        </div>

                        <div class="team-member">
                            <div class="team-avatar">ZP</div>
                            <div class="team-info">
                                <div class="team-name">Zoltán Pap</div>
                                <div class="team-role">Co-founder & Operations</div>
                                <a href="mailto:zoltan.pap@dcfhungary.org" class="team-email">zoltan.pap@dcfhungary.org</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-card">
                    <h3 class="sidebar-title">Quick Links</h3>
                    <div class="quick-links">
                        <a href="dcf_member_home.html" class="quick-link">
                            <span class="quick-link-icon">🏠</span>
                            <span>Member Dashboard</span>
                        </a>
                        <a href="dcf_projects_home.html" class="quick-link">
                            <span class="quick-link-icon">📁</span>
                            <span>View Projects</span>
                        </a>
                        <a href="dcf_events_calendar.html" class="quick-link">
                            <span class="quick-link-icon">📅</span>
                            <span>Upcoming Events</span>
                        </a>
                        <a href="dcf_resources_library.html" class="quick-link">
                            <span class="quick-link-icon">📚</span>
                            <span>Resource Library</span>
                        </a>
                        <a href="dcf_about.html" class="quick-link">
                            <span class="quick-link-icon">ℹ️</span>
                            <span>About DCF Hungary</span>
                        </a>
                        <a href="dcf_newsletter.html" class="quick-link">
                            <span class="quick-link-icon">📰</span>
                            <span>Newsletter Archive</span>
                        </a>
                    </div>
                </div>

                <div class="emergency-contact">
                    <div class="emergency-title">🚨 Urgent Matters</div>
                    <div class="emergency-description">
                        For urgent matters requiring immediate attention
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Simple form with Formspree backup -->
    <script>
        // FAQ functionality
        function toggleFaq(element) {
            const answer = element.nextElementSibling;
            const isOpen = answer.classList.contains('active');
            
            // Close all FAQ answers
            document.querySelectorAll('.faq-answer').forEach(item => {
                item.classList.remove('active');
            });
            
            // Open clicked FAQ if it wasn't already open
            if (!isOpen) {
                answer.classList.add('active');
            }
        }

        // Form validation
        function validateForm() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const inquiryType = document.getElementById('inquiryType').value;
            const subject = document.getElementById('subject').value.trim();
            const message = document.getElementById('message').value.trim();

            if (!firstName || !lastName || !email || !inquiryType || !subject || !message) {
                alert('Please fill in all required fields.');
                return false;
            }

            if (message.length < 50) {
                alert('Please provide a more detailed message (minimum 50 characters).');
                return false;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return false;
            }

            return true;
        }

        // Form submission handler
        document.addEventListener('DOMContentLoaded', function() {
            const contactForm = document.getElementById('contactForm');
            
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    // Validate form before submission
                    if (!validateForm()) {
                        e.preventDefault();
                        return false;
                    }
                    
                    // Show loading state
                    const submitBtn = contactForm.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '⏳ Sending...';
                    submitBtn.disabled = true;
                    
                    // Let Formspree handle the submission
                    // Form will redirect automatically
                });
            }
        });

        // Character counter for message field
        document.addEventListener('DOMContentLoaded', function() {
            const messageField = document.getElementById('message');
            if (messageField) {
                messageField.addEventListener('input', function() {
                    const messageLength = this.value.length;
                    const helpText = this.nextElementSibling;
                    
                    if (messageLength < 50) {
                        helpText.textContent = `Minimum 50 characters. ${50 - messageLength} characters remaining.`;
                        helpText.style.color = '#dc3545';
                    } else {
                        helpText.textContent = 'Perfect! Your message is detailed enough.';
                        helpText.style.color = '#28a745';
                    }
                });
            }
        });

        // Auto-focus first field
        document.addEventListener('DOMContentLoaded', function() {
            const firstField = document.getElementById('firstName');
            if (firstField) {
                firstField.focus();
            }
   });

        // User menu functionality
        let isDropdownOpen = false;

        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            const overlay = getOrCreateOverlay();
            
            if (isDropdownOpen) {
                closeUserMenu();
            } else {
                openUserMenu();
            }
        }

        function openUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            const overlay = getOrCreateOverlay();
            
            dropdown.classList.add('active');
            overlay.classList.add('active');
            isDropdownOpen = true;
            
            updateUserDropdownInfo();
        }

        function closeUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            const overlay = document.querySelector('.dropdown-overlay');
            
            dropdown.classList.remove('active');
            if (overlay) overlay.classList.remove('active');
            isDropdownOpen = false;
        }

        function getOrCreateOverlay() {
            let overlay = document.querySelector('.dropdown-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = 'dropdown-overlay';
                overlay.onclick = closeUserMenu;
                document.body.appendChild(overlay);
            }
            return overlay;
        }

        function updateUserDropdownInfo() {
            const userName = localStorage.getItem('dcf_user_name') || 'Dr. Sarah Johnson';
            const userEmail = localStorage.getItem('dcf_user_email') || 'sarah.johnson@dcfhungary.org';
            const authProvider = localStorage.getItem('dcf_auth_provider') || 'demo';

            const nameElement = document.getElementById('dropdownUserName');
            const emailElement = document.getElementById('dropdownUserEmail');

            if (nameElement) nameElement.textContent = userName;
            if (emailElement) emailElement.textContent = userEmail;

            const initials = generateInitials(userName);
            const avatarElement = document.getElementById('userAvatar');
            const dropdownAvatarElement = document.querySelector('.dropdown-avatar');

            if (avatarElement) avatarElement.textContent = initials;
            if (dropdownAvatarElement) dropdownAvatarElement.textContent = initials;

            if (authProvider === 'github') {
                if (emailElement) emailElement.textContent = `${userEmail} (GitHub)`;
            }
        }

        function generateInitials(name) {
            if (!name) return 'SJ';
            const parts = name.split(' ');
            if (parts.length >= 2) {
                return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
            }
            return name.substring(0, 2).toUpperCase();
        }

        function logout() {
            if (confirm('Are you sure you want to sign out?')) {
                localStorage.removeItem('dcf_github_session');
                localStorage.removeItem('dcf_user_logged_in');
                localStorage.removeItem('dcf_user_name');
                localStorage.removeItem('dcf_user_email');
                localStorage.removeItem('dcf_auth_provider');
                localStorage.removeItem('dcf_remember_login');

                sessionStorage.clear();

                alert('You have been signed out successfully.');
                window.location.href = 'dcf_login_page.html';
            }
        }

        // Initialize user menu on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateUserDropdownInfo();

            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('dcf_user_logged_in');
            if (isLoggedIn !== 'true') {
                alert('Please log in to access member pages.');
                window.location.href = 'dcf_login_page.html';
            }

            // Close dropdown on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && isDropdownOpen) {
                    closeUserMenu();
                }
            });
        });
    </script>
</body>
</html>