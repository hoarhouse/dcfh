<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Menu Test - DCF</title>
    <style>
        body {
            font-family: -apple-system, system-ui, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }
        .header {
            background: white;
            border-bottom: 1px solid #e5e5e5;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            margin: 0;
            padding: 0;
        }
        .nav-menu > li {
            position: relative;
        }
        .nav-menu a {
            text-decoration: none;
            color: #333;
            padding: 0.5rem;
            display: block;
            transition: color 0.2s;
        }
        .nav-menu a:hover {
            color: #000;
        }
        .user-menu {
            display: flex;
            gap: 1rem;
        }
        .test-section {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: 500;
            margin-left: 10px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .test-item {
            padding: 1rem;
            margin: 0.5rem 0;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
        }
        .test-item.pass {
            border-color: #28a745;
            background: #d4edda;
        }
        .test-item.fail {
            border-color: #dc3545;
            background: #f8d7da;
        }
        /* Visual guide for testing */
        .dropdown-guide {
            background: #f0f0f0;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }
        .dropdown-guide h3 {
            margin-top: 0;
            color: #333;
        }
        .guide-step {
            padding: 0.5rem;
            margin: 0.5rem 0;
            background: white;
            border-left: 3px solid #007bff;
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav-container">
            <a href="#" class="logo">
                <!-- Logo will be populated by dcf-ui.js -->
            </a>
            <ul class="nav-menu">
                <!-- Navigation will be populated by dcf-ui.js -->
            </ul>
            <div class="user-menu">
                <!-- User menu will be populated by dcf-ui.js -->
            </div>
        </nav>
    </header>

    <div class="test-section">
        <h1>üéØ Dropdown Menu Test</h1>
        <p>This page tests the dropdown menu hover functionality after the bug fix.</p>
        
        <div class="dropdown-guide">
            <h3>Test Instructions:</h3>
            <div class="guide-step">
                <strong>Step 1:</strong> Hover over "Initiatives" in the navigation menu above
            </div>
            <div class="guide-step">
                <strong>Step 2:</strong> Move your mouse down to the submenu items
            </div>
            <div class="guide-step">
                <strong>Step 3:</strong> The menu should STAY OPEN as you move to submenu items
            </div>
            <div class="guide-step">
                <strong>Step 4:</strong> Click on any submenu item - it should navigate correctly
            </div>
            <div class="guide-step">
                <strong>Step 5:</strong> Repeat test with "About" dropdown
            </div>
        </div>
        
        <h2>Fix Applied:</h2>
        <div class="test-item">
            <h3>‚úÖ CSS Changes:</h3>
            <ul>
                <li>Changed <code>margin-top: 0.5rem</code> to <code>margin-top: 0</code> - Removed gap</li>
                <li>Increased <code>min-width</code> to 220px for better visibility</li>
                <li>Added <code>white-space: nowrap</code> to prevent text wrapping</li>
                <li>Increased padding on links for better click targets</li>
            </ul>
        </div>
        
        <div class="test-item">
            <h3>‚úÖ JavaScript Changes:</h3>
            <ul>
                <li>Added hover timeout with 50ms delay</li>
                <li>Added <code>relatedTarget</code> check to keep menu open</li>
                <li>Added mouseenter/mouseleave on submenu itself</li>
                <li>Clear timeout when re-entering dropdown area</li>
            </ul>
        </div>
        
        <h2>Expected Behavior:</h2>
        <div class="test-item pass">
            <strong>‚úÖ PASS:</strong> Dropdown menu stays visible when moving from parent to submenu items
        </div>
        <div class="test-item pass">
            <strong>‚úÖ PASS:</strong> All submenu links are clickable
        </div>
        <div class="test-item pass">
            <strong>‚úÖ PASS:</strong> Smooth hover experience without flickering
        </div>
        
        <h2>Visual Test Status:</h2>
        <div id="testStatus">
            <p><strong>Initiatives Dropdown:</strong> <span id="initiativesStatus" class="status">Testing...</span></p>
            <p><strong>About Dropdown:</strong> <span id="aboutStatus" class="status">Testing...</span></p>
            <p><strong>Overall Status:</strong> <span id="overallStatus" class="status">Testing...</span></p>
        </div>
    </div>

    <!-- Load DCF Modular System -->
    <script src="js/dcf-core.js"></script>
    <script src="js/dcf-ui.js"></script>
    <script src="js/dcf-auth.js"></script>
    <script src="js/dcf-init.js"></script>
    
    <script>
        window.addEventListener('dcfReady', function() {
            console.log('üéØ Dropdown Test Page Ready');
            
            // After a moment, check if dropdowns exist
            setTimeout(() => {
                const dropdowns = document.querySelectorAll('.nav-dropdown');
                const initiativesDropdown = Array.from(dropdowns).find(d => 
                    d.textContent.includes('Initiatives'));
                const aboutDropdown = Array.from(dropdowns).find(d => 
                    d.textContent.includes('About'));
                
                // Update status
                const initiativesStatus = document.getElementById('initiativesStatus');
                const aboutStatus = document.getElementById('aboutStatus');
                const overallStatus = document.getElementById('overallStatus');
                
                if (initiativesDropdown) {
                    const submenu = initiativesDropdown.querySelector('.nav-submenu, .nav-dropdown-menu');
                    if (submenu) {
                        initiativesStatus.textContent = 'Ready to test';
                        initiativesStatus.className = 'status success';
                        
                        // Monitor hover events
                        initiativesDropdown.addEventListener('mouseenter', () => {
                            console.log('‚úÖ Initiatives dropdown opened');
                        });
                        
                        submenu.addEventListener('mouseenter', () => {
                            console.log('‚úÖ Mouse entered Initiatives submenu - menu should stay open');
                        });
                    }
                } else {
                    initiativesStatus.textContent = 'Not found';
                    initiativesStatus.className = 'status error';
                }
                
                if (aboutDropdown) {
                    const submenu = aboutDropdown.querySelector('.nav-submenu, .nav-dropdown-menu');
                    if (submenu) {
                        aboutStatus.textContent = 'Ready to test';
                        aboutStatus.className = 'status success';
                        
                        // Monitor hover events
                        aboutDropdown.addEventListener('mouseenter', () => {
                            console.log('‚úÖ About dropdown opened');
                        });
                        
                        submenu.addEventListener('mouseenter', () => {
                            console.log('‚úÖ Mouse entered About submenu - menu should stay open');
                        });
                    }
                } else {
                    aboutStatus.textContent = 'Not found';
                    aboutStatus.className = 'status error';
                }
                
                if (initiativesDropdown && aboutDropdown) {
                    overallStatus.textContent = 'All dropdowns ready - Test them above!';
                    overallStatus.className = 'status success';
                } else {
                    overallStatus.textContent = 'Some dropdowns missing';
                    overallStatus.className = 'status error';
                }
                
                console.log('üîç Dropdowns found:', {
                    initiatives: !!initiativesDropdown,
                    about: !!aboutDropdown,
                    total: dropdowns.length
                });
            }, 500);
        });
    </script>
</body>
</html>