<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Chat - AI Ethics Framework | DCF Hungary</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }

        .header {
            background: white;
            border-bottom: 1px solid #e5e5e5;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #333;
            text-decoration: none;
        }

        .logo-icon {
            width: 24px;
            height: 24px;
            background: #333;
            border-radius: 50%;
            margin-right: 8px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            text-decoration: none;
            color: #666;
            font-size: 0.9rem;
            position: relative;
        }

        .nav-menu a.active {
            color: #333;
            font-weight: 600;
        }

        .nav-menu a:hover {
            color: #333;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

       .user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #000, #333);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .user-avatar:hover {
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .user-menu {
            position: relative;
        }

        .user-dropdown {
            position: relative;
        }

        .dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            border: 1px solid #e5e5e5;
            min-width: 280px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .dropdown-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            border-bottom: 1px solid #f0f0f0;
        }

        .dropdown-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #000, #333);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .dropdown-info {
            flex: 1;
            min-width: 0;
        }

        .dropdown-name {
            font-weight: 600;
            color: #333;
            font-size: 1rem;
            margin-bottom: 0.25rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .dropdown-email {
            color: #666;
            font-size: 0.85rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .dropdown-divider {
            height: 1px;
            background: #f0f0f0;
            margin: 0.5rem 0;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: #333;
            text-decoration: none;
            transition: all 0.2s ease;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .dropdown-item:hover {
            background: #f8f9fa;
            color: #000;
        }

        .logout-btn {
            color: #dc3545 !important;
            font-weight: 500;
        }

        .logout-btn:hover {
            background: #fee !important;
            color: #c82333 !important;
        }

        .dropdown-icon {
            font-size: 1rem;
            width: 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .dropdown-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 999;
            display: none;
        }

        .dropdown-overlay.active {
            display: block;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            height: calc(100vh - 90px);
        }

        .breadcrumb {
            margin-bottom: 1rem;
            color: #666;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: #666;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            color: #333;
            text-decoration: underline;
        }

        .breadcrumb span {
            margin: 0 0.5rem;
        }

        .project-chat-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: grid;
            grid-template-columns: 280px 1fr 300px;
            height: 100%;
            overflow: hidden;
        }

        .chat-sidebar {
            border-right: 1px solid #e5e5e5;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e5e5;
            background: #f8f9fa;
        }

        .project-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .project-icon {
            width: 40px;
            height: 40px;
            background: #000;
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .project-details {
            flex: 1;
        }

        .project-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .project-status {
            color: #666;
            font-size: 0.9rem;
        }

        .chat-channels {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .channel-section {
            margin-bottom: 1.5rem;
        }

        .channel-section-title {
            font-size: 0.8rem;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
            padding: 0 1rem;
        }

        .channel-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9rem;
        }

        .channel-item:hover {
            background: #f8f9fa;
        }

        .channel-item.active {
            background: #f0f0f0;
            border-right: 3px solid #333;
            font-weight: 600;
        }

        .channel-icon {
            font-size: 1rem;
            color: #666;
        }

        .channel-name {
            flex: 1;
            color: #333;
        }

        .channel-badge {
            background: #dc3545;
            color: white;
            border-radius: 10px;
            padding: 0.2rem 0.5rem;
            font-size: 0.7rem;
            font-weight: 600;
            min-width: 16px;
            text-align: center;
        }

        .channel-badge.zero {
            display: none;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e5e5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
        }

        .chat-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chat-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .chat-description {
            color: #666;
            font-size: 0.9rem;
        }

        .chat-actions {
            display: flex;
            gap: 0.5rem;
        }

        .chat-action-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .chat-action-btn:hover {
            background: #f8f9fa;
            color: #333;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            position: relative;
        }

        .message.system {
            justify-content: center;
            margin: 1rem 0;
        }

        .system-message {
            background: #f8f9fa;
            color: #666;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            text-align: center;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .message-content {
            flex: 1;
            min-width: 0;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .message-sender {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
        }

        .message-time {
            color: #999;
            font-size: 0.8rem;
        }

        .message-role {
            background: #e9ecef;
            color: #666;
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .message-role.lead {
            background: #fff3cd;
            color: #856404;
        }

        .message-text {
            color: #333;
            line-height: 1.4;
            word-wrap: break-word;
            margin-bottom: 0.5rem;
        }

        .message-attachments {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .attachment {
            background: #f8f9fa;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            padding: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .attachment:hover {
            background: #e9ecef;
        }

        .attachment-icon {
            font-size: 1.2rem;
        }

        .attachment-info {
            flex: 1;
        }

        .attachment-name {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
        }

        .attachment-size {
            color: #666;
            font-size: 0.8rem;
        }

        .message-reactions {
            display: flex;
            gap: 0.25rem;
            margin-top: 0.5rem;
        }

        .reaction {
            background: #f8f9fa;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .reaction:hover {
            background: #e9ecef;
        }

        .reaction.active {
            background: #333;
            color: white;
            border-color: #333;
        }

        .message-actions {
            position: absolute;
            top: 0;
            right: 0;
            background: white;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            padding: 0.25rem;
            display: none;
            gap: 0.25rem;
        }

        .message:hover .message-actions {
            display: flex;
        }

        .message-action {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .message-action:hover {
            background: #f8f9fa;
            color: #333;
        }

        .message-input-container {
            padding: 1rem;
            border-top: 1px solid #e5e5e5;
            background: #f8f9fa;
        }

        .message-input-wrapper {
            display: flex;
            align-items: flex-end;
            gap: 0.75rem;
            background: white;
            border: 2px solid #e5e5e5;
            border-radius: 12px;
            padding: 0.75rem;
            transition: border-color 0.3s ease;
        }

        .message-input-wrapper:focus-within {
            border-color: #333;
        }

        .message-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1rem;
            font-family: inherit;
            resize: none;
            min-height: 20px;
            max-height: 100px;
            line-height: 1.4;
        }

        .message-toolbar {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .message-tool-btn {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .message-tool-btn:hover {
            background: #f8f9fa;
            color: #333;
        }

        .send-btn {
            background: #000;
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            background: #333;
        }

        .send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .project-sidebar {
            border-left: 1px solid #e5e5e5;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow-y: auto;
        }

        .sidebar-section {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e5e5;
        }

        .sidebar-section:last-child {
            border-bottom: none;
        }

        .sidebar-title {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .team-member {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .team-member:hover {
            background: #f8f9fa;
        }

        .team-member-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            position: relative;
        }

        .team-member-info {
            flex: 1;
        }

        .team-member-name {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
        }

        .team-member-role {
            color: #666;
            font-size: 0.8rem;
        }

        .online-indicator {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 12px;
            height: 12px;
            background: #28a745;
            border-radius: 50%;
            border: 2px solid white;
        }

        .task-item {
            padding: 0.75rem;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            border-color: #333;
        }

        .task-item.completed {
            background: #f8fff8;
            border-color: #28a745;
        }

        .task-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.25rem;
        }

        .task-checkbox {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .task-title {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
            flex: 1;
        }

        .task-assignee {
            color: #666;
            font-size: 0.8rem;
        }

        .task-description {
            color: #666;
            font-size: 0.8rem;
            line-height: 1.3;
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
        }

        .file-item:hover {
            border-color: #333;
            background: #f8f9fa;
        }

        .file-icon {
            width: 32px;
            height: 32px;
            background: #000;
            color: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .file-icon.pdf {
            background: #dc3545;
        }

        .file-icon.doc {
            background: #007bff;
        }

        .file-icon.image {
            background: #28a745;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .file-meta {
            color: #666;
            font-size: 0.8rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .btn-primary {
            background: #000;
            color: white;
        }

        .btn-primary:hover {
            background: #333;
        }

        .btn-secondary {
            background: transparent;
            color: #666;
            border: 1px solid #e5e5e5;
        }

        .btn-secondary:hover {
            color: #333;
            border-color: #333;
        }

        .btn-small {
            padding: 0.25rem 0.75rem;
            font-size: 0.8rem;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0;
            font-size: 0.9rem;
            color: #666;
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #999;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        @media (max-width: 1024px) {
            .project-chat-container {
                grid-template-columns: 250px 1fr;
            }

            .project-sidebar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }

            .project-chat-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
            }

            .chat-sidebar {
                border-right: none;
                border-bottom: 1px solid #e5e5e5;
                height: auto;
                max-height: 200px;
            }

            .chat-container {
                min-height: 0;
            }

            .nav-menu {
                display: none;
            }

            .message-input-wrapper {
                flex-direction: column;
                gap: 0.5rem;
            }

            .message-toolbar {
                justify-content: space-between;
            }

            .breadcrumb {
                display: none;
            }
        }
    </style>
<script src="universal-navbar.js"></script>
</head>

<body>
    <header class="header">
        <nav class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon"></div>
                Domus Communis Foundation
            </a>
            <ul class="nav-menu">
                <li><a href="dcf_member_home.html">Home</a></li>
                <li><a href="dcf_members_directory.html">Members</a></li>
                <li><a href="dcf_projects_home.html" class="active">Projects</a></li>
                <li><a href="dcf_events_calendar.html">Events</a></li>
                <li><a href="dcf_resources_library.html">Resources</a></li>
            </ul>
            <div class="user-menu">
    <div class="user-dropdown">
        <div class="user-avatar" onclick="toggleUserMenu()" id="userAvatar"></div>        <div class="dropdown-menu" id="userDropdown">
            <div class="dropdown-header">
                <div class="dropdown-avatar"></div>
                <div class="dropdown-info">
                    <div class="dropdown-name" id="dropdownUserName">Dr. Sarah Johnson</div>
                    <div class="dropdown-email" id="dropdownUserEmail">sarah.johnson@dcfhungary.org</div>
                </div>
            </div>
            <div class="dropdown-divider"></div>
            <a href="dcf_member_profile.html" class="dropdown-item">
                <span class="dropdown-icon">👤</span>
                View Profile
            </a>
            <a href="dcf_settings.html" class="dropdown-item">
                <span class="dropdown-icon">⚙️</span>
                Settings
            </a>
            <a href="dcf_contact.html" class="dropdown-item">
                <span class="dropdown-icon">💬</span>
                Help & Support
            </a>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item logout-btn" onclick="localStorage.clear(); sessionStorage.clear(); window.location.href='dcf_login_page.html'; return false;">
                <span class="dropdown-icon">🚪</span>
                LOGOUT
            </button>
        </div>
    </div>
</div>
        </nav>
    </header>

    <main class="main-container">
        <div class="breadcrumb">
            <a href="dcf_member_home.html">Home</a>
            <span>></span>
            <a href="dcf_projects_home.html">Projects</a>
            <span>></span>
            <a href="dcf_project_detail.html">AI Ethics Framework</a>
            <span>></span>
            <span>Team Chat</span>
        </div>

        <div class="project-chat-container">
            <div class="chat-sidebar">
                <div class="sidebar-header">
                    <div class="project-info">
                        <div class="project-icon">🤖</div>
                        <div class="project-details">
                            <div class="project-title">AI Ethics Framework</div>
                            <div class="project-status">Active • 8 members</div>
                        </div>
                    </div>
                </div>

                <div class="chat-channels">
                    <div class="channel-section">
                        <div class="channel-section-title">Project Channels</div>
                        <div class="channel-item active" data-channel="general">
                            <div class="channel-icon">#</div>
                            <div class="channel-name">general</div>
                            <div class="channel-badge">3</div>
                        </div>
                        <div class="channel-item" data-channel="research">
                            <div class="channel-icon">#</div>
                            <div class="channel-name">research</div>
                            <div class="channel-badge zero">0</div>
                        </div>
                        <div class="channel-item" data-channel="development">
                            <div class="channel-icon">#</div>
                            <div class="channel-name">development</div>
                            <div class="channel-badge">1</div>
                        </div>
                        <div class="channel-item" data-channel="documentation">
                            <div class="channel-icon">#</div>
                            <div class="channel-name">documentation</div>
                            <div class="channel-badge zero">0</div>
                        </div>
                    </div>

                    <div class="channel-section">
                        <div class="channel-section-title">Direct Messages</div>
                        <div class="channel-item" data-channel="dm-mary">
                            <div class="channel-icon">👤</div>
                            <div class="channel-name">Dr. Mary Aiken</div>
                            <div class="channel-badge">2</div>
                        </div>
                        <div class="channel-item" data-channel="dm-michael">
                            <div class="channel-icon">👤</div>
                            <div class="channel-name">Fr. Michael Torres</div>
                            <div class="channel-badge zero">0</div>
                        </div>
                        <div class="channel-item" data-channel="dm-antal">
                            <div class="channel-icon">👤</div>
                            <div class="channel-name">Dr. Antal Kuthy</div>
                            <div class="channel-badge">1</div>
                        </div>
                    </div>

                    <div class="channel-section">
                        <div class="channel-section-title">Notifications</div>
                        <div class="channel-item" data-channel="announcements">
                            <div class="channel-icon">📢</div>
                            <div class="channel-name">announcements</div>
                            <div class="channel-badge zero">0</div>
                        </div>
                        <div class="channel-item" data-channel="milestones">
                            <div class="channel-icon">🎯</div>
                            <div class="channel-name">milestones</div>
                            <div class="channel-badge">1</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-container">
                <div class="chat-header">
                    <div class="chat-info">
                        <div>
                            <div class="chat-title"># general</div>
                            <div class="chat-description">Main discussion channel for the AI Ethics Framework project</div>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="chat-action-btn" onclick="openChannelInfo()" title="Channel Info">ℹ️</button>
                        <button class="chat-action-btn" onclick="searchMessages()" title="Search Messages">🔍</button>
                        <button class="chat-action-btn" onclick="pinMessage()" title="Pin Message">📌</button>
                        <button class="chat-action-btn" onclick="muteChannel()" title="Mute Channel">🔕</button>
                    </div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        <div class="system-message">
                            Project created • Dr. Sarah Johnson set up the AI Ethics Framework project
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">SJ</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-sender">Dr. Sarah Johnson</div>
                                <div class="message-role lead">Project Lead</div>
                                <div class="message-time">Today at 9:00 AM</div>
                            </div>
                            <div class="message-text">
                                Welcome everyone to the AI Ethics Framework project! I'm excited to have such a talented team working on this important initiative. Let's use this channel for general coordination and updates.
                            </div>
                            <div class="message-reactions">
                                <div class="reaction">👍 5</div>
                                <div class="reaction">🎉 3</div>
                            </div>
                        </div>
                        <div class="message-actions">
                            <button class="message-action" onclick="reactToMessage(this)">👍</button>
                            <button class="message-action" onclick="replyToMessage(this)">💬</button>
                            <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">MA</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-sender">Dr. Mary Aiken</div>
                                <div class="message-role">Research Lead</div>
                                <div class="message-time">Today at 9:15 AM</div>
                            </div>
                            <div class="message-text">
                                Thank you for including me, Sarah! I've been working on the child safety aspects of AI ethics and I'm eager to contribute to this framework. I'll be focusing on the developmental psychology implications.
                            </div>
                            <div class="message-reactions">
                                <div class="reaction">❤️ 4</div>
                                <div class="reaction">🔬 2</div>
                            </div>
                        </div>
                        <div class="message-actions">
                            <button class="message-action" onclick="reactToMessage(this)">👍</button>
                            <button class="message-action" onclick="replyToMessage(this)">💬</button>
                            <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">MT</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-sender">Fr. Michael Torres</div>
                                <div class="message-role">Theology Advisor</div>
                                <div class="message-time">Today at 9:30 AM</div>
                            </div>
                            <div class="message-text">
                                I'm honored to be part of this project. The integration of Catholic Social Teaching principles into AI ethics is crucial for ensuring technology serves human dignity and the common good.
                            </div>
                            <div class="message-attachments">
                                <a href="#" class="attachment">
                                    <div class="attachment-icon">📄</div>
                                    <div class="attachment-info">
                                        <div class="attachment-name">Catholic_Social_Teaching_AI_Framework.pdf</div>
                                        <div class="attachment-size">2.4 MB</div>
                                    </div>
                                </a>
                            </div>
                            <div class="message-reactions">
                                <div class="reaction">🙏 6</div>
                                <div class="reaction">📖 3</div>
                            </div>
                        </div>
                        <div class="message-actions">
                            <button class="message-action" onclick="reactToMessage(this)">👍</button>
                            <button class="message-action" onclick="replyToMessage(this)">💬</button>
                            <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">AK</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-sender">Dr. Antal Kuthy</div>
                                <div class="message-role">Technical Lead</div>
                                <div class="message-time">Today at 10:00 AM</div>
                            </div>
                            <div class="message-text">
                                Excellent! I've set up the technical infrastructure for our framework development. The GitHub repository is ready and I've created the initial documentation structure. Let's schedule our first technical review meeting.
                            </div>
                            <div class="message-attachments">
                                <a href="#" class="attachment">
                                    <div class="attachment-icon">💻</div>
                                    <div class="attachment-info">
                                        <div class="attachment-name">Technical_Architecture_Overview.md</div>
                                        <div class="attachment-size">156 KB</div>
                                    </div>
                                </a>
                            </div>
                            <div class="message-reactions">
                                <div class="reaction">🚀 4</div>
                                <div class="reaction">⚙️ 2</div>
                            </div>
                        </div>
                        <div class="message-actions">
                            <button class="message-action" onclick="reactToMessage(this)">👍</button>
                            <button class="message-action" onclick="replyToMessage(this)">💬</button>
                            <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                        </div>
                    </div>

                    <div class="message system">
                        <div class="system-message">
                            📁 Dr. Antal Kuthy uploaded 3 files to the project repository
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">AP</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-sender">Dr. Alessio Pecorario</div>
                                <div class="message-role">Policy Analyst</div>
                                <div class="message-time">Today at 11:30 AM</div>
                            </div>
                            <div class="message-text">
                                Great progress already! From a policy perspective, we need to ensure our framework aligns with emerging AI regulations, particularly the EU AI Act. I'll be working on the compliance aspects.
                            </div>
                            <div class="message-reactions">
                                <div class="reaction">⚖️ 3</div>
                                <div class="reaction">✅ 2</div>
                            </div>
                        </div>
                        <div class="message-actions">
                            <button class="message-action" onclick="reactToMessage(this)">👍</button>
                            <button class="message-action" onclick="replyToMessage(this)">💬</button>
                            <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                        </div>
                    </div>

                    <div class="message">
                        <div class="message-avatar">SJ</div>
                        <div class="message-content">
                            <div class="message-header">
                                <div class="message-sender">Dr. Sarah Johnson</div>
                                <div class="message-role lead">Project Lead</div>
                                <div class="message-time">Today at 12:00 PM</div>
                            </div>
                            <div class="message-text">
                                Perfect timing, everyone! I've just completed the initial project roadmap. We have three main phases: Research & Analysis, Framework Development, and Testing & Validation. Each phase has specific milestones and deliverables.
                            </div>
                            <div class="message-attachments">
                                <a href="#" class="attachment">
                                    <div class="attachment-icon">📊</div>
                                    <div class="attachment-info">
                                        <div class="attachment-name">AI_Ethics_Framework_Roadmap.xlsx</div>
                                        <div class="attachment-size">892 KB</div>
                                    </div>
                                </a>
                            </div>
                            <div class="message-reactions">
                                <div class="reaction">📈 5</div>
                                <div class="reaction">👏 4</div>
                            </div>
                        </div>
                        <div class="message-actions">
                            <button class="message-action" onclick="reactToMessage(this)">👍</button>
                            <button class="message-action" onclick="replyToMessage(this)">💬</button>
                            <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                        </div>
                    </div>

                    <div class="typing-indicator" id="typingIndicator" style="display: none;">
                        <div class="message-avatar">MT</div>
                        <div>
                            <span>Fr. Michael Torres is typing</span>
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="message-input-container">
                    <div class="message-input-wrapper">
                        <div class="message-toolbar">
                            <button class="message-tool-btn" onclick="attachFile()" title="Attach File">📎</button>
                            <button class="message-tool-btn" onclick="addEmoji()" title="Add Emoji">😊</button>
                            <button class="message-tool-btn" onclick="formatText()" title="Format Text">💬</button>
                            <button class="message-tool-btn" onclick="mentionUser()" title="Mention User">@</button>
                        </div>
                        <textarea class="message-input" placeholder="Type your message..." id="messageInput" rows="1"></textarea>
                        <button class="send-btn" onclick="sendMessage()" id="sendButton" disabled>→</button>
                    </div>
                </div>
            </div>

            <div class="project-sidebar">
                <div class="sidebar-section">
                    <h3 class="sidebar-title">Team Members (8)</h3>
                    <div class="team-member" onclick="openMemberProfile('sarah-johnson')">
                        <div class="team-member-avatar">
                            SJ
                            <div class="online-indicator"></div>
                        </div>
                        <div class="team-member-info">
                            <div class="team-member-name">Dr. Sarah Johnson</div>
                            <div class="team-member-role">Project Lead</div>
                        </div>
                    </div>
                    <div class="team-member" onclick="openMemberProfile('mary-aiken')">
                        <div class="team-member-avatar">
                            MA
                            <div class="online-indicator"></div>
                        </div>
                        <div class="team-member-info">
                            <div class="team-member-name">Dr. Mary Aiken</div>
                            <div class="team-member-role">Research Lead</div>
                        </div>
                    </div>
                    <div class="team-member" onclick="openMemberProfile('michael-torres')">
                        <div class="team-member-avatar">MT</div>
                        <div class="team-member-info">
                            <div class="team-member-name">Fr. Michael Torres</div>
                            <div class="team-member-role">Theology Advisor</div>
                        </div>
                    </div>
                    <div class="team-member" onclick="openMemberProfile('antal-kuthy')">
                        <div class="team-member-avatar">
                            AK
                            <div class="online-indicator"></div>
                        </div>
                        <div class="team-member-info">
                            <div class="team-member-name">Dr. Antal Kuthy</div>
                            <div class="team-member-role">Technical Lead</div>
                        </div>
                    </div>
                    <div class="team-member" onclick="openMemberProfile('alessio-pecorario')">
                        <div class="team-member-avatar">AP</div>
                        <div class="team-member-info">
                            <div class="team-member-name">Dr. Alessio Pecorario</div>
                            <div class="team-member-role">Policy Analyst</div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Recent Tasks</h3>
                    <div class="task-item completed" onclick="openTask('research-review')">
                        <div class="task-header">
                            <input type="checkbox" class="task-checkbox" checked>
                            <div class="task-title">Literature Review</div>
                            <div class="task-assignee">MA</div>
                        </div>
                        <div class="task-description">Complete comprehensive review of AI ethics literature</div>
                    </div>
                    <div class="task-item" onclick="openTask('framework-draft')">
                        <div class="task-header">
                            <input type="checkbox" class="task-checkbox">
                            <div class="task-title">Framework Draft</div>
                            <div class="task-assignee">SJ</div>
                        </div>
                        <div class="task-description">Create initial framework structure and components</div>
                    </div>
                    <div class="task-item" onclick="openTask('technical-spec')">
                        <div class="task-header">
                            <input type="checkbox" class="task-checkbox">
                            <div class="task-title">Technical Specifications</div>
                            <div class="task-assignee">AK</div>
                        </div>
                        <div class="task-description">Define technical requirements and implementation details</div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Project Files</h3>
                    <a href="#" class="file-item" onclick="openFile('roadmap')">
                        <div class="file-icon">📊</div>
                        <div class="file-info">
                            <div class="file-name">Project Roadmap</div>
                            <div class="file-meta">Excel • 892 KB</div>
                        </div>
                    </a>
                    <a href="#" class="file-item" onclick="openFile('framework-doc')">
                        <div class="file-icon pdf">📄</div>
                        <div class="file-info">
                            <div class="file-name">Framework Documentation</div>
                            <div class="file-meta">PDF • 2.4 MB</div>
                        </div>
                    </a>
                    <a href="#" class="file-item" onclick="openFile('research-notes')">
                        <div class="file-icon doc">📝</div>
                        <div class="file-info">
                            <div class="file-name">Research Notes</div>
                            <div class="file-meta">Word • 1.2 MB</div>
                        </div>
                    </a>
                    <a href="#" class="file-item" onclick="openFile('technical-arch')">
                        <div class="file-icon">💻</div>
                        <div class="file-info">
                            <div class="file-name">Technical Architecture</div>
                            <div class="file-meta">Markdown • 156 KB</div>
                        </div>
                    </a>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title"><script src="universal-navbar.js"></script>
<!-- SCRIPT REMOVED -->
</h3>
                    <button class="btn btn-primary" onclick="scheduleMeeting()">📅 Schedule Meeting</button>
                    <button class="btn btn-secondary" onclick="createTask()">✅ Create Task</button>
                    <button class="btn btn-secondary" onclick="uploadFile()">📎 Upload File</button>
                    <button class="btn btn-secondary" onclick="viewProject()">👁️ View Project</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        let currentChannel = 'general';
        let isTyping = false;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            setupMessageInput();
            setupChannelListeners();
            loadChannelMessages(currentChannel);
        });

        function setupMessageInput() {
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');

            messageInput.addEventListener('input', function() {
                // Auto-resize textarea
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 100) + 'px';
                
                // Enable/disable send button
                sendButton.disabled = !this.value.trim();
                
                // Show typing indicator
                if (!isTyping && this.value.trim()) {
                    isTyping = true;
                    showTypingIndicator();
                }
            });

            messageInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Hide typing indicator when user stops typing
            messageInput.addEventListener('blur', function() {
                if (isTyping) {
                    isTyping = false;
                    hideTypingIndicator();
                }
            });
        }

        function setupChannelListeners() {
            document.querySelectorAll('.channel-item').forEach(item => {
                item.addEventListener('click', function() {
                    const channelId = this.dataset.channel;
                    if (channelId) {
                        switchChannel(channelId);
                    }
                });
            });
        }

        function switchChannel(channelId) {
            // Update active channel
            document.querySelectorAll('.channel-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-channel="${channelId}"]`).classList.add('active');
            
            // Mark channel as read
            const channelBadge = document.querySelector(`[data-channel="${channelId}"] .channel-badge`);
            if (channelBadge) {
                channelBadge.textContent = '0';
                channelBadge.classList.add('zero');
            }
            
            currentChannel = channelId;
            loadChannelMessages(channelId);
        }

        function loadChannelMessages(channelId) {
            const chatMessages = document.getElementById('chatMessages');
            const chatTitle = document.querySelector('.chat-title');
            const chatDescription = document.querySelector('.chat-description');
            
            // Update channel info
            const channelInfo = {
                'general': {
                    title: '# general',
                    description: 'Main discussion channel for the AI Ethics Framework project'
                },
                'research': {
                    title: '# research',
                    description: 'Research findings and academic discussions'
                },
                'development': {
                    title: '# development',
                    description: 'Technical development and implementation'
                },
                'documentation': {
                    title: '# documentation',
                    description: 'Project documentation and guides'
                }
            };
            
            const info = channelInfo[channelId] || { title: `# ${channelId}`, description: 'Channel description' };
            chatTitle.textContent = info.title;
            chatDescription.textContent = info.description;
            
            // For demo purposes, we'll keep the same messages
            // In a real app, this would load channel-specific messages
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const messageText = messageInput.value.trim();
            
            if (!messageText) return;

            // Create message element
            const messageElement = document.createElement('div');
            messageElement.className = 'message';
            
            const now = new Date();
            const timeString = `Today at ${now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
            
            messageElement.innerHTML = `
                <div class="message-avatar">SJ</div>
                <div class="message-content">
                    <div class="message-header">
                        <div class="message-sender">Dr. Sarah Johnson</div>
                        <div class="message-role lead">Project Lead</div>
                        <div class="message-time">${timeString}</div>
                    </div>
                    <div class="message-text">${messageText}</div>
                    <div class="message-reactions"></div>
                </div>
                <div class="message-actions">
                    <button class="message-action" onclick="reactToMessage(this)">👍</button>
                    <button class="message-action" onclick="replyToMessage(this)">💬</button>
                    <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                </div>
            `;
            
            // Add to chat
            const chatMessages = document.getElementById('chatMessages');
            const typingIndicator = document.getElementById('typingIndicator');
            chatMessages.insertBefore(messageElement, typingIndicator);
            
            // Clear input
            messageInput.value = '';
            messageInput.style.height = 'auto';
            document.getElementById('sendButton').disabled = true;
            
            // Hide typing indicator
            if (isTyping) {
                isTyping = false;
                hideTypingIndicator();
            }
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate response after delay
            setTimeout(() => {
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    simulateResponse();
                }, 2000);
            }, 1000);
        }

        function simulateResponse() {
            const responses = [
                "Great point! I'll update the documentation to reflect that.",
                "Thanks for bringing that up. Let's discuss this in our next meeting.",
                "I agree completely. This aligns with our project objectives.",
                "Excellent idea! I'll add that to our task list.",
                "That's a valuable insight. Let me research that further."
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            const now = new Date();
            const timeString = `Today at ${now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`;
            
            const messageElement = document.createElement('div');
            messageElement.className = 'message';
            
            messageElement.innerHTML = `
                <div class="message-avatar">MT</div>
                <div class="message-content">
                    <div class="message-header">
                        <div class="message-sender">Fr. Michael Torres</div>
                        <div class="message-role">Theology Advisor</div>
                        <div class="message-time">${timeString}</div>
                    </div>
                    <div class="message-text">${randomResponse}</div>
                    <div class="message-reactions"></div>
                </div>
                <div class="message-actions">
                    <button class="message-action" onclick="reactToMessage(this)">👍</button>
                    <button class="message-action" onclick="replyToMessage(this)">💬</button>
                    <button class="message-action" onclick="bookmarkMessage(this)">📌</button>
                </div>
            `;
            
            const chatMessages = document.getElementById('chatMessages');
            const typingIndicator = document.getElementById('typingIndicator');
            chatMessages.insertBefore(messageElement, typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'flex';
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        // Message actions
        function reactToMessage(button) {
            const messageElement = button.closest('.message');
            const reactionsContainer = messageElement.querySelector('.message-reactions');
            
            // Add thumbs up reaction
            const existingReaction = Array.from(reactionsContainer.children).find(r => r.textContent.includes('👍'));
            if (existingReaction) {
                const count = parseInt(existingReaction.textContent.match(/\d+/)[0]) + 1;
                existingReaction.textContent = `👍 ${count}`;
            } else {
                const reactionElement = document.createElement('div');
                reactionElement.className = 'reaction';
                reactionElement.textContent = '👍 1';
                reactionsContainer.appendChild(reactionElement);
            }
        }

        function replyToMessage(button) {
            const messageElement = button.closest('.message');
            const sender = messageElement.querySelector('.message-sender').textContent;
            const messageInput = document.getElementById('messageInput');
            messageInput.value = `@${sender} `;
            messageInput.focus();
        }

        function bookmarkMessage(button) {
            alert('Message bookmarked!');
        }

        // Chat actions
        function openChannelInfo() {
            alert('Channel information panel would open here');
        }

        function searchMessages() {
            alert('Message search functionality would be implemented here');
        }

        function pinMessage() {
            alert('Pin message functionality would be implemented here');
        }

        function muteChannel() {
            alert('Channel muted. You can unmute in channel settings.');
        }

        // Message tools
        function attachFile() {
            alert('File attachment functionality would be implemented here');
        }

        function addEmoji() {
            alert('Emoji picker would be implemented here');
        }

        function formatText() {
            alert('Text formatting options would be implemented here');
        }

        function mentionUser() {
            alert('User mention functionality would be implemented here');
        }

        // Sidebar actions
        function openMemberProfile(memberId) {
            window.location.href = `dcf_member_view.html?id=${memberId}`;
        }

        function openTask(taskId) {
            alert(`Opening task: ${taskId}`);
        }

        function openFile(fileId) {
            alert(`Opening file: ${fileId}`);
        }

        function scheduleMapping() {
            alert('Meeting scheduling functionality would be implemented here');
        }

        function createTask() {
            alert('Task creation functionality would be implemented here');
        }

        function uploadFile() {
            alert('File upload functionality would be implemented here');
        }

        function viewProject() {
            window.location.href = 'dcf_project_detail.html';
        }

        // Task checkbox handling
        document.querySelectorAll('.task-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const taskItem = this.closest('.task-item');
                taskItem.classList.toggle('completed', this.checked);
            });
        });

        // Team member click handlers
        document.querySelectorAll('.team-member').forEach(member => {
            member.addEventListener('click', function() {
                if (!this.onclick) {
                    alert('Member profile would be shown here');
                }
            });
        });

        // File item click handlers
        document.querySelectorAll('.file-item').forEach(file => {
            file.addEventListener('click', function(e) {
                e.preventDefault();
                if (!this.onclick) {
                    alert('File would be opened here');
                }
            });
   });

        // User menu functionality
        let isDropdownOpen = false;

        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            const overlay = getOrCreateOverlay();
            
            if (isDropdownOpen) {
                closeUserMenu();
            } else {
                openUserMenu();
            }
        }

        function openUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            const overlay = getOrCreateOverlay();
            
            dropdown.classList.add('active');
            overlay.classList.add('active');
            isDropdownOpen = true;
            
            updateUserDropdownInfo();
        }

        function closeUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            const overlay = document.querySelector('.dropdown-overlay');
            
            dropdown.classList.remove('active');
            if (overlay) overlay.classList.remove('active');
            isDropdownOpen = false;
        }

        function getOrCreateOverlay() {
            let overlay = document.querySelector('.dropdown-overlay');
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.className = 'dropdown-overlay';
                overlay.onclick = closeUserMenu;
                document.body.appendChild(overlay);
            }
            return overlay;
        }

        // updateUserDropdownInfo function removed - handled by master JS

        function generateInitials(name) {
            if (!name) return 'SJ';
            const parts = name.split(' ');
            if (parts.length >= 2) {
                return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
            }
            return name.substring(0, 2).toUpperCase();
        }

        function logout() {
            if (confirm('Are you sure you want to sign out?')) {
                localStorage.removeItem('dcf_github_session');
                localStorage.removeItem('dcf_user_logged_in');
                localStorage.removeItem('dcf_user_name');
                localStorage.removeItem('dcf_user_email');
                localStorage.removeItem('dcf_auth_provider');
                localStorage.removeItem('dcf_remember_login');

                sessionStorage.clear();

                alert('You have been signed out successfully.');
                window.location.href = 'dcf_login_page.html';
            }
        }

        // Initialize user menu on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateUserDropdownInfo();

            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('dcf_user_logged_in');
            if (isLoggedIn !== 'true') {
                // DISABLED: alert('Please log in to access member pages.');
                window.location.href = 'dcf_login_page.html';
            }

            // Close dropdown on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && isDropdownOpen) {
                    closeUserMenu();
                }
            });
        });
    </script>
<script src="universal-dropdown.js"></script>

</body>
</html>